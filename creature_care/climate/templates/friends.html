<!-- Page created by Lucia 
    Minor edits done by Des -->
{% extends "base.html" %}

{% load static %}

{% block title %}
    Friends
{% endblock %}

{% block head %}
    <!-- Placeholder favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'cat-face.png' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'cat_animation.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'recycling_bin.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'tupperware.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'waterbottle.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'advice.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'my_stats.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'friends.css' %}">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet"/> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet"/> 

    <style>                                     
        body {
            background-color: #649756;
        }
        div.row {
            height: 25%;
        }
        
    </style>
{% endblock %}

{% block content %}

<div class='main_column'>
    <div class = 'text-box'>
        <p class = "title">FRIENDS</p>
        <p>Meet some fellow enviromentalists!</p>
    </div>

    <div class="cat_section">
        <div class="cat_box">
            <div class="container-1">
                <div id = "hat-container" class="hat-container" style = "top: 55px; left: 72px;">
                    {% load static %} 
                    <img id = "u_hat" width = '176', height = '176' src = "{% static 'blank-hat.png' %}">
                </div>
                <div class="cat" id="cat1">
                    <div class="face" id="u_face">
                        <div class="ear-l" id = "u_ear-l"></div>
                        <div class="ear-r" id="u_ear-r"></div>
                        <div class="inner-l"></div>
                        <div class="inner-r"></div>
                        <div class="eye-l" id="u_eye-l">
                            <div class = "eyeball"><div class="eyeshine"><div class="eyeshine2"></div></div></div>
                        </div>
                        <div class="eye-r" id="u_eye-r">
                            <div class = "eyeball"><div class="eyeshine"><div class="eyeshine2"></div></div></div>
                        </div>
                        <div class="nose">
                            <div class="l1"></div>
                            <div class="l2"></div>
                        </div>
                        <div class="speech1">meow</div>
                    </div>
                    <div class="body" id="u_body">
                        <div class="paw-l" id="u_paw-l"></div>
                        <div class="paw-r" id="u_paw-r"></div>
                        <div class="tail" id="u_tail"></div>
                    </div>
                    <div class="shadow"></div>
                </div>
            </div>
        </div>
        
        <div class="cat_box">
            <div class="container-1">
                <div id = "hat-container" class="hat-container" style = "right: 40px; top: 55px;">
                    {% load static %} 
                    <img id = "f_hat" width = '176', height = '176' src = "{% static 'blank-hat.png' %}">
                </div>
                <div class="cat" id="cat2"> 
                    <div class="face" id="f_face">
                        <div class="ear-l" id = "f_ear-l"></div>
                        <div class="ear-r" id = "f_ear-r"></div>
                        <div class="inner-l"></div>
                        <div class="inner-r"></div>
                        <div class="eye-l" id="f_eye-l">
                            <div class = "eyeball"><div class="eyeshine"><div class="eyeshine2"></div></div></div>
                        </div>
                        <div class="eye-r" id="f_eye-r">
                            <div class = "eyeball"><div class="eyeshine"><div class="eyeshine2"></div></div></div>
                        </div>
                        <div class="nose">
                            <div class="l1"></div>
                            <div class="l2"></div>
                        </div>
                        <div class="speech2">meow</div>
                    </div>
                    <div class="body" id="f_body">
                        <div class="paw-l" id="f_paw-l"></div>
                        <div class="paw-r" id="f_paw-r"></div>
                        <div class="tail" id="f_tail"></div>
                    </div>
                    <div class="shadow"></div>
                </div>
            </div>      



        </div>

    </div>

    <div class="card_section">

        <div class="player_card">
            
            <div class="username_box">{{username}}</div>
            
            <div class="stat_line">
                <div class="stat_name">bottles</div>
                <div class="stat">{{bottle_num}}</div>   
            </div>
            <div class="stat_line">
                <div class="stat_name">articles</div>
                <div class="stat">{{article_num}}</div>   
            </div>
            <div class="stat_line">
                <div class="stat_name">recycles</div>
                <div class="stat">{{recycle_num}}</div>   
            </div>
        </div>

        <div class="player_card">
            
            <div class="username_box">{{friend_username}}</div>
            
            <div class="stat_line">
                <div class="stat_name">bottles</div>
                <div class="stat">{{friend_bottle_num}}</div>   
            </div>
            <div class="stat_line">
                <div class="stat_name">articles</div>
                <div class="stat">{{friend_article_num}}</div>   
            </div>
            <div class="stat_line">
                <div class="stat_name">recycles</div>
                <div class="stat">{{friend_recycle_num}}</div>   
            </div>
        </div>
    </div>

    
    <a class="refresh-btn" href="{% url 'friend' %}">
            <p class="button-text">&#8635; New Friend</p>
    </a>

</div> 

<script>

    var styleElem = document.head.appendChild(document.createElement("style"));
    styleElem.innerHTML = ".face:before {right: 100px;}";

    let u_fur_colour = '{{ fur_colour }}'; 
    let u_eye_colour = '{{ eye_colour }}'; 

    let f_fur_colour = '{{ f_fur_colour }}'; 
    let f_eye_colour = '{{ f_eye_colour }}'; 

    let u_currently_wearing = '{{ cat_item }}';
    let u_current_size = '{{ cat_item_scale }}';

    let f_currently_wearing = '{{ f_cat_item }}';
    let f_current_size = '{{ f_cat_item_scale }}';

    if (u_currently_wearing != 0) {
            document.getElementById("u_hat").src = "/static/" + u_currently_wearing + ".svg";
            document.getElementById("u_hat").width = u_current_size;
            document.getElementById("u_hat").height = u_current_size;
    }

    if (f_currently_wearing != 0) {
            document.getElementById("f_hat").src = "/static/" + f_currently_wearing + ".svg";
            document.getElementById("f_hat").width = f_current_size;
            document.getElementById("f_hat").height = f_current_size;
    }

    u_body_colour = u_fur_colour.split(",")[0];
    u_patches = u_fur_colour.split(",")[1];

    f_body_colour = f_fur_colour.split(",")[0];
    f_patches = f_fur_colour.split(",")[1];

    // change user cat body colour
    var colour = ["u_face", "u_body", "u_tail", "u_paw-r"];
    colour.forEach(function (item, index) {
        document.getElementById(item).style.backgroundColor = u_body_colour;
    });
    var colour_2 = ["f_face", "f_body", "f_tail", "f_paw-r"];
    colour_2.forEach(function (item, index) {
        document.getElementById(item).style.backgroundColor = f_body_colour;
    });

    var eye_colour = ["u_eye-l", "u_eye-r"];
    eye_colour.forEach(function (item, index) {
        document.getElementById(item).style.backgroundColor = u_eye_colour;
    });
    var eye_colour_2 = ["f_eye-l", "f_eye-r"];
    eye_colour_2.forEach(function (item, index) {
        document.getElementById(item).style.backgroundColor = f_eye_colour;
    });

    document.getElementById("u_ear-l").style.borderBottom = "50px solid " + u_body_colour;
    document.getElementById("u_ear-r").style.borderBottom = "50px solid " + u_patches;
    document.getElementById("u_paw-l").style.backgroundColor = u_patches;

    document.getElementById("f_ear-l").style.borderBottom = "50px solid " + f_body_colour;
    document.getElementById("f_ear-r").style.borderBottom = "50px solid " + f_patches;
    document.getElementById("f_paw-l").style.backgroundColor = f_patches;

</script>

{% endblock %}